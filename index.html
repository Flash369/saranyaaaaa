<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Happy Valentine's Day</title>
    
    <!-- Fonts: Cormorant Garamond (Premium Serif), DM Sans (Clean Sans), Great Vibes (Signature) -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,300;0,400;0,500;0,600;0,700;1,400&family=DM+Sans:ital,wght@0,200;0,300;0,400;1,300&family=Great+Vibes&display=swap" rel="stylesheet">
    
    <!-- GSAP for Animations -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>

    <style>
        /* --- PSYCHOLOGICAL ROMANTIC PALETTE --- */
        :root {
            /* Background Base */
            --bg-deep: #0B0304;       
            --bg-wine: #120506;       
            --bg-warm: #1A080A;       

            /* Primary Romantic Surface */
            --surface-velvet: #2B0D12;
            --surface-rosewood: #3A1218;
            --surface-burgundy: #4A1A21;

            /* Accent Emotional Glow */
            --glow-affection: #FF8FA3; 
            --glow-skin: #FFC1B6;      
            --glow-touch: #F5D0C5;     

            /* Readable Text */
            --text-main: #FFEAE6;
            --text-secondary: #D7A6A0;
            --text-inactive: #9A6A67;

            /* Luxury Metallic */
            --rose-gold: #E6B7A8;
            --soft-copper: #C78F7E;

            /* Typography */
            --font-heading: 'Cormorant Garamond', serif;
            --font-body: 'DM Sans', sans-serif;
            --font-signature: 'Great Vibes', cursive;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        body {
            background-color: var(--bg-deep);
            color: var(--text-main);
            font-family: var(--font-body);
            overflow: hidden; 
            height: 100vh;
            width: 100vw;
            display: flex;
            justify-content: center;
            align-items: center;
            letter-spacing: 0.02em;
        }

        /* --- ATMOSPHERIC BACKGROUND LAYERS --- */
        #atmosphere-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            overflow: hidden;
            background: radial-gradient(circle at center, var(--bg-warm) 0%, var(--bg-deep) 100%);
        }

        .film-grain {
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E");
            opacity: 0.03;
            pointer-events: none;
            z-index: 1;
        }

        .smoky-cloud {
            position: absolute;
            border-radius: 50%;
            filter: blur(80px);
            opacity: 0.08;
            background: var(--surface-burgundy);
            z-index: 0;
        }

        #glow-bloom {
            position: absolute;
            width: 60vw;
            height: 60vw;
            background: radial-gradient(circle, var(--glow-skin) 0%, transparent 70%);
            opacity: 0;
            filter: blur(100px);
            pointer-events: none;
            z-index: 2;
        }

        #cursor-glow {
            position: fixed;
            width: 300px;
            height: 300px;
            background: radial-gradient(circle, rgba(255, 193, 182, 0.08) 0%, transparent 70%);
            border-radius: 50%;
            pointer-events: none;
            z-index: 3;
            transform: translate(-50%, -50%);
            transition: opacity 0.5s ease;
        }

        #canvas-bg {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 4;
            pointer-events: none;
        }

        /* --- LAYOUT CONTAINER --- */
        .container {
            width: 100%;
            max-width: 700px;
            height: 100%;
            position: relative;
            padding: 1.5rem;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            z-index: 10;
        }

        /* --- SECTIONS --- */
        section {
            position: absolute;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 2rem 1rem;
            opacity: 0;
            visibility: hidden;
            pointer-events: none;
        }

        section.active {
            opacity: 1;
            visibility: visible;
            pointer-events: all;
        }

        /* --- OPTIMIZED TYPOGRAPHY --- */
        h1, h2, h3 {
            font-family: var(--font-heading);
            color: var(--text-main);
            line-height: 1.2;
            margin-bottom: 1rem;
            font-weight: 400;
        }

        h1 { 
            font-size: clamp(2rem, 10vw, 3.2rem); 
            letter-spacing: -0.02em; 
        }
        h2 { 
            font-size: clamp(1.5rem, 7vw, 2.2rem); 
        }
        h3 { 
            font-size: clamp(1.1rem, 5vw, 1.4rem); 
            font-style: italic; 
            color: var(--text-secondary); 
        }

        p {
            font-size: clamp(0.9rem, 2.5vw, 1.05rem);
            line-height: 1.6;
            color: var(--text-secondary);
            margin-bottom: 1.5rem;
            max-width: 90%;
            font-weight: 300;
        }
        
        .highlight { color: var(--rose-gold); font-style: italic; }

        /* --- OPTIMIZED BUTTONS --- */
        .btn {
            background-color: var(--surface-rosewood);
            color: var(--text-main);
            font-family: var(--font-body);
            font-weight: 400;
            text-transform: uppercase;
            letter-spacing: 0.15em;
            font-size: clamp(0.65rem, 2vw, 0.75rem);
            padding: clamp(12px, 3vh, 16px) clamp(30px, 8vw, 45px);
            border: 1px solid rgba(230, 183, 168, 0.2);
            cursor: pointer;
            transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            border-radius: 2px;
            overflow: hidden;
            flex-shrink: 0;
        }

        .btn:hover { 
            background-color: var(--surface-burgundy);
            border-color: var(--rose-gold);
            color: var(--glow-skin);
            box-shadow: 0 0 20px rgba(255, 143, 163, 0.1);
            transform: translateY(-1px);
        }
        
        .btn-mood {
            padding: 8px 18px;
            font-size: 0.65rem;
            margin: 4px;
            background-color: transparent;
            border: 1px solid var(--text-inactive);
            color: var(--text-secondary);
        }

        /* --- INPUTS --- */
        input[type="text"] {
            background: transparent;
            border: none;
            border-bottom: 1px solid var(--text-inactive);
            padding: 10px;
            font-family: var(--font-heading);
            font-size: clamp(1rem, 5vw, 1.25rem);
            text-align: center;
            width: 80%;
            max-width: 300px;
            color: var(--text-main);
            outline: none;
            margin-bottom: 2rem;
            transition: border-color 0.4s;
        }
        
        /* --- OPTIMIZED GRID --- */
        .grid-container {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: clamp(8px, 2vw, 15px);
            width: 100%;
            max-width: 500px;
            margin-bottom: 1.5rem;
        }
        
        .grid-item {
            background: var(--surface-velvet);
            height: clamp(65px, 12vh, 95px);
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            padding: 8px;
            border: 1px solid rgba(230, 183, 168, 0.1); 
            cursor: pointer;
            font-size: clamp(0.65rem, 1.8vw, 0.8rem);
            border-radius: 3px;
        }

        .grid-item.unlocked { 
            background: var(--surface-rosewood); 
            color: var(--text-main); 
            border-color: rgba(230, 183, 168, 0.3);
        }

        /* --- SPECIFIC PAGE STYLES --- */
        .countdown-timer {
            font-family: var(--font-heading);
            font-size: clamp(1.8rem, 8vw, 2.5rem);
            color: var(--rose-gold);
            margin: 1rem 0;
            font-weight: 300;
        }

        .letter-container {
            background: var(--surface-velvet);
            padding: clamp(1.5rem, 5vw, 3rem) clamp(1rem, 4vw, 2.5rem);
            box-shadow: 0 15px 50px rgba(0,0,0,0.5); 
            width: 100%;
            max-height: 60vh;
            overflow-y: auto;
            text-align: left;
            border: 1px solid rgba(230, 183, 168, 0.05);
            margin: 0 auto;
        }
        
        .letter-content {
            font-family: 'Cormorant Garamond', serif;
            font-size: clamp(1rem, 3.5vw, 1.2rem);
            line-height: 1.7;
            color: var(--text-main);
        }

        .signature-name { font-family: var(--font-signature); font-size: clamp(1.8rem, 6vw, 2.2rem); color: var(--rose-gold); }

        /* Unlock */
        .switch { width: 50px; height: 28px; }
        .slider:before { height: 20px; width: 20px; left: 3px; bottom: 3px; }

        .loading-bar { height: 1px; background: var(--rose-gold); width: 0%; margin: 20px auto; opacity: 0.5; }

        #ai-response {
            font-family: 'Cormorant Garamond', serif;
            font-size: clamp(1rem, 4vw, 1.25rem);
            min-height: 80px;
            margin: 1.5rem 0;
            padding: 15px;
            color: var(--text-main);
            border-left: 1px solid var(--soft-copper);
        }

        /* Laptop Specific adjustments */
        @media (min-width: 1024px) {
            .container { max-width: 800px; }
            section { padding: 3rem; }
            p { max-width: 75%; }
        }

        /* Landscape Mobile adjustment */
        @media (max-height: 500px) and (orientation: landscape) {
            .container { padding: 0.5rem; }
            h1 { font-size: 1.8rem; margin-bottom: 0.5rem; }
            p { margin-bottom: 1rem; }
            .grid-container { grid-template-columns: repeat(5, 1fr); }
            .grid-item { height: 60px; }
            .letter-container { max-height: 40vh; }
        }
    </style>
</head>
<body>

    <audio id="bg-music" loop>
        <source src="./song.mp3" type="audio/mp3">
    </audio>

    <div id="atmosphere-container">
        <div class="film-grain"></div>
        <div id="glow-bloom"></div>
        <div id="cursor-glow"></div>
        <div class="smoky-cloud" style="width: 40vw; height: 40vw; top: 10%; left: -10%;"></div>
        <div class="smoky-cloud" style="width: 50vw; height: 50vw; bottom: -10%; right: -10%; background: var(--surface-rosewood);"></div>
    </div>

    <canvas id="canvas-bg"></canvas>

    <div class="container">

        <!-- PAGE 1: HERO -->
        <section id="page-1" class="active">
            <h1 class="hero-title">Hii, babe<br><span class="highlight">Here is your Valentine gift...</span></h1>
            <p>
                Not perfect<br>
                Just something made with my hands,<br>
                and my heart üíì for you.
            </p>
            <button class="btn" onclick="startExperience()">Enter the Experience</button>
        </section>

        <!-- PAGE 2: TEASE 1 -->
        <section id="page-2">
            <h2>You know what?</h2>
            <div style="font-size: 1.5rem; color: var(--rose-gold); margin-top: 15px; opacity: 0.5;">‚úß</div>
            <button class="btn" style="margin-top: 30px;" onclick="nextSection(2)">Next</button>
        </section>

        <!-- PAGE 3: TEASE 2 -->
        <section id="page-3">
            <h2 style="max-width: 90%;">
                Some people enter your life softly,<br>
                and before you realize it,<br>
                they become the place you feel safest.<br>
                That‚Äôs you.
            </h2>
            <button class="btn" style="margin-top: 30px;" onclick="nextSection(3)">Next</button>
        </section>

        <!-- PAGE 4: UNIVERSE -->
        <section id="page-4">
            <h2>
                My favorite word is ‚ÄúUniverse.‚Äù<br>
                Because it begins with U,<br>
                and somehow ends with everything I feel.<br>
            </h2>
            <button class="btn" style="margin-top: 30px;" onclick="nextSection(4)">Next</button>
        </section>

        <!-- PAGE 5: 10 THINGS -->
        <section id="page-5">
            <h3>10 Things I Love About You</h3>
            <div class="grid-container" id="grid-things"></div>
            <button class="btn" id="btn-page-5" style="display:none; margin-top: 10px;" onclick="nextSection(5)">Continue the Journey</button>
        </section>

        <!-- PAGE 6: COUNTDOWN -->
        <section id="page-6">
            <h2>The Journey</h2>
            <p>It was 6 June 2025, we first exchanged words....<br>And that small moment brought us all the way here.</p>
            <div class="countdown-timer">
                <div id="timer-display">000 Days</div>
                <div class="timer-label">Since we started talking</div>
            </div>
            <button class="btn" style="margin-top: 15px;" onclick="nextSection(6)">Next</button>
        </section>

        <!-- PAGE 7: LETTER -->
        <section id="page-7">
            <div class="letter-container">
                <div class="letter-content">
                    <p><strong>Happy Valentine‚Äôs Day, my wifey ‚ù§Ô∏è</strong></p>
                    <p>a.k.a. my fuddu larki,<br>and the person I love the most.</p>
                    <p>I don‚Äôt always know how to put feelings into perfect words, but one thing I know for sure, you are my home. And once you find home, you stop looking anywhere else.</p>
                    <p>You‚Äôre the person I can‚Äôt imagine a life without, the one my heart casually chose and now refuses to negotiate about.</p>
                    <p>All I want is you by my side ‚Äì no grand demands, no extra wishes. Just us. Laughing, growing, annoying each other, and building a future that feels like ours.</p>
                    <p>I want to make you feel loved, on the loud days and the quiet ones, on the days you shine and the days you forget that you do.</p>
                    <p>I‚Äôve said it before, and I‚Äôll say it again ‚Äì you are the most important person in my world, and my heart is very serious about you.</p>
                    <p>You are rare. You are valuable. Your presence matters more than you realize.</p>
                    <p>So stay exactly who you are, keep shining, keep smiling, because you‚Äôre a star‚Ä¶ and stars don‚Äôt ask for permission to glow ‚ú®üíì</p>
                    <div class="signature-block">
                        <span class="with-love">Always yours,</span>
                        <span class="signature-name">Raj</span>
                    </div>
                </div>
            </div>
            <button class="btn" style="margin-top: 20px;" onclick="nextSection(7)">Next</button>
        </section>

        <!-- PAGE 8: INPUT VERIFICATION -->
        <section id="page-8">
            <h3 style="font-weight: 300; margin-bottom: 5px;">Type exactly:</h3>
            <p class="highlight" style="font-size: 0.9rem; margin-bottom: 20px; opacity: 0.8;">"I love you raj and I'll always do"</p>
            <input type="text" id="magic-input" placeholder="Type here..." autocomplete="off">
            <button class="btn" onclick="checkInput()">Submit</button>
        </section>

        <!-- PAGE 9: TEASE LINE -->
        <section id="page-9">
            <h2>Do you know what, Saranya?</h2>
            <button class="btn" onclick="nextSection(9)">Next</button>
        </section>

        <!-- PAGE 10: DRAMATIC REVEAL -->
        <section id="page-10">
            <h1>I'm your gift, my sannu</h1>
            <h3 style="margin-top: -5px;">Come and unwrap me.</h3>
            <p style="color: var(--glow-affection); opacity: 0.8; margin-top: 10px;">Naughty harkatein üòã</p>
            <button class="btn" onclick="nextSection(10)">Next</button>
        </section>

        <!-- PAGE 11: UNLOCK ANIMATION -->
        <section id="page-11">
            <h2>Unlock Your Real Gift</h2>
            <div style="margin: 20px 0;">
                <label class="switch">
                    <input type="checkbox" id="gift-toggle" onchange="unlockGift()">
                    <span class="slider"></span>
                </label>
            </div>
            <div class="loading-bar" id="gift-loader"></div>
            <div class="gift-reveal-text" id="gift-msg" style="display:none;">
                Your gift is unlocked:<br>
                <span style="color: var(--rose-gold); display: block; margin-top: 10px; font-size: 1.1rem;">Fuddu ghar jaake khud dekh lena shammmm ko hehe</span>
                <span style="font-size: 1.5rem; margin-top: 5px; display: block;">üòÇ</span>
            </div>
            <button class="btn" id="btn-final" style="display:none; margin-top:20px;" onclick="nextSection(11)">Next</button>
        </section>

        <!-- PAGE 12: CUPID'S MUSE -->
        <section id="page-12">
            <h2>Cupid's Muse ‚ú®</h2>
            <p style="opacity: 0.7;">Still want more words? Pick a mood.</p>
            <div class="mood-buttons">
                <button class="btn btn-mood" onclick="generateLoveNote('Romantic')">Romantic ‚ù§Ô∏è</button>
                <button class="btn btn-mood" onclick="generateLoveNote('Funny')">Funny üòÇ</button>
                <button class="btn btn-mood" onclick="generateLoveNote('Spicy')">Spicy üå∂Ô∏è</button>
                <button class="btn btn-mood" onclick="generateLoveNote('Sweet')">Sweet üç¨</button>
            </div>
            <div id="ai-response">Pick a mood above...</div>
            <button class="btn" onclick="nextSection(12)">Finish</button>
        </section>

        <!-- PAGE 13: ENDING -->
        <section id="page-13">
            <div style="padding: 2.5rem 1.5rem; background: var(--surface-velvet); border: 1px solid rgba(230, 183, 168, 0.1); border-radius: 2px; width: 90%;">
                <h2 style="color: var(--text-main);">Have a beautiful day cutie</h2>
                <p>Wishing you every ounce of happiness üíã</p>
                <p style="font-size: 0.85rem; opacity: 0.6; margin-bottom: 0;">Take care, hottieüòã</p>
            </div>
        </section>

    </div>

    <script>
        let currentSection = 1;
        const totalSections = 13;

        const things = [
            "I love your smile the kind that fixes my worst days without trying",
            "I love how effortlessly cute you are, even when you don‚Äôt notice it yourself",
            "I love how you make me laugh, not just with jokes, but with your presence",
            "I love how you made me feel loved, in ways I didn‚Äôt even know I needed",
            "I love how adorable you are, especially when you‚Äôre being completely you",
            "Your natural prettiness, the kind that doesn‚Äôt ask for attention, but steals it anyway",
            "The caring version of you, the one that feels like warmth in human form",
            "That clumsy smile, the one that shows up when you‚Äôre shy or happy or both",
            "The way you get annoyed, and somehow look even more lovable doing it",
            "Your big dreams, and that quiet fire inside you, the urge to chase them no matter what"
        ];
        let unlockedThings = 0;

        document.addEventListener('DOMContentLoaded', () => {
            initAtmosphere();
            initParticles();
            initThingsGrid();
            startCountdown();
            initCursorGlow();
            
            gsap.from(".hero-title", { duration: 2, y: 30, opacity: 0, ease: "power2.out" });
            gsap.from("#page-1 p", { duration: 2, opacity: 0, delay: 0.6 });
        });

        function initAtmosphere() {
            gsap.to("#atmosphere-container", {
                duration: 4,
                backgroundColor: "#1D0B0D",
                ease: "sine.inOut",
                repeat: -1,
                yoyo: true
            });

            const bloom = document.getElementById('glow-bloom');
            gsap.to(bloom, {
                duration: 8,
                opacity: 0.04,
                scale: 1.2,
                ease: "sine.inOut",
                repeat: -1,
                yoyo: true
            });
        }

        function initCursorGlow() {
            const glow = document.getElementById('cursor-glow');
            window.addEventListener('mousemove', (e) => {
                gsap.to(glow, {
                    x: e.clientX,
                    y: e.clientY,
                    duration: 1.2,
                    ease: "power2.out"
                });
            });
        }

        function startExperience() {
            const audio = document.getElementById('bg-music');
            audio.volume = 0.2;
            audio.play().catch(() => {});
            nextSection(1);
        }

        function nextSection(current) {
            const next = current + 1;
            const currentEl = document.getElementById(`page-${current}`);
            const nextEl = document.getElementById(`page-${next}`);
            if (!nextEl) return;

            gsap.to(currentEl, {
                duration: 1,
                opacity: 0,
                y: -20,
                ease: "power2.inOut",
                onComplete: () => {
                    currentEl.classList.remove('active');
                    nextEl.classList.add('active');
                    gsap.fromTo(nextEl, 
                        { y: 20, opacity: 0 }, 
                        { y: 0, opacity: 1, duration: 1.2, ease: "power2.out" }
                    );
                }
            });
        }

        function initThingsGrid() {
            const container = document.getElementById('grid-things');
            things.forEach((thing) => {
                const item = document.createElement('div');
                item.className = 'grid-item locked';
                item.innerHTML = `<span>üîí</span><span class="hidden-content">${thing}</span>`;
                item.onclick = () => revealThing(item);
                container.appendChild(item);
            });
        }

        function revealThing(element) {
            if (!element.classList.contains('locked')) return;
            element.classList.remove('locked');
            element.classList.add('unlocked');
            element.querySelector('span:first-child').style.display = 'none';
            element.querySelector('.hidden-content').style.display = 'block';
            unlockedThings++;
            if (unlockedThings === things.length) {
                gsap.to("#btn-page-5", { display: "inline-block", opacity: 1, duration: 1 });
            }
        }

        function startCountdown() {
            const startDate = new Date('2025-06-06T00:00:00');
            const display = document.getElementById('timer-display');
            setInterval(() => {
                const now = new Date();
                const diff = now - startDate;
                const days = Math.floor(diff / (1000 * 60 * 60 * 24));
                const hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
                const seconds = Math.floor((diff % (1000 * 60)) / 1000);
                display.innerText = `${days}d ${hours}h ${minutes}m ${seconds}s`;
            }, 1000);
        }

        function checkInput() {
            const input = document.getElementById('magic-input');
            const val = input.value.trim().toLowerCase().replace(/\s+/g, ' '); 
            const correct = "i love you raj and i'll always do";
            const alternative = "i love you raj and ill always do";
            if (val === correct || val === alternative) {
                nextSection(8);
            } else {
                gsap.to(input, { x: -5, duration: 0.1, yoyo: true, repeat: 3 });
                input.style.borderBottomColor = "#7A2E3A";
                setTimeout(() => input.style.borderBottomColor = "var(--text-inactive)", 1000);
            }
        }

        function unlockGift() {
            const toggle = document.getElementById('gift-toggle');
            const loader = document.getElementById('gift-loader');
            const msg = document.getElementById('gift-msg');
            const btn = document.getElementById('btn-final');
            if (toggle.checked) {
                toggle.disabled = true;
                loader.style.display = 'block';
                gsap.to(loader, {
                    width: "100%",
                    duration: 5,
                    ease: "sine.inOut",
                    onComplete: () => {
                        loader.style.display = 'none';
                        msg.style.display = 'block';
                        btn.style.display = "inline-block";
                    }
                });
            }
        }
        
        function generateLoveNote(mood) {
            const responseDiv = document.getElementById('ai-response');
            const messages = {
                'Romantic': "In the quiet of the night, it‚Äôs you I hear,<br>My safe place, my home, my favorite fear.<br>No grand gestures, just your hand in mine,<br>A love that ages better than the finest wine. ‚ù§Ô∏è<br>- Your Raj",
                'Funny': "You steal my hoodies and eat my fries,<br>But I still get lost in your pretty eyes.<br>You're a 'fuddu' sometimes, it's true,<br>But I'm the lucky idiot who fell for you. üòÇ<br>- Your Raj",
                'Spicy': "Closer than close is where I want to be,<br>Just you, the night, and this chemistry.<br>A whisper, a touch, a shiver down the spine,<br>Tonight, I need you to be completely mine. üå∂Ô∏è<br>- Your Raj",
                'Sweet': "Like sugar in coffee, you make life sweet,<br>My heart skips a beat every time we meet.<br>You‚Äôre my sunshine on a cloudy day,<br>I love you more than words can say. üç¨<br>- Your Raj"
            };
            gsap.to(responseDiv, { opacity: 0, duration: 0.3, onComplete: () => {
                responseDiv.innerHTML = messages[mood];
                gsap.to(responseDiv, { opacity: 1, duration: 0.6 });
            }});
        }

        function initParticles() {
            const canvas = document.getElementById('canvas-bg');
            const ctx = canvas.getContext('2d');
            let w, h;
            function resize() { w = canvas.width = window.innerWidth; h = canvas.height = window.innerHeight; }
            window.addEventListener('resize', resize);
            resize();

            const dusts = [];
            const petals = [];

            class Dust {
                constructor() { this.reset(); }
                reset() {
                    this.x = Math.random() * w; this.y = h + 10;
                    this.s = Math.random() * 1.5; this.vx = (Math.random() - 0.5) * 0.2;
                    this.vy = -Math.random() * 0.4 - 0.1; this.o = Math.random() * 0.4;
                    this.c = Math.random() > 0.5 ? '#FFC1B6' : '#E6B7A8';
                }
                update() {
                    this.x += this.vx; this.y += this.vy;
                    if (this.y < -10) this.reset();
                }
                draw() {
                    ctx.fillStyle = this.c; ctx.globalAlpha = this.o;
                    ctx.beginPath(); ctx.arc(this.x, this.y, this.s, 0, Math.PI * 2); ctx.fill();
                }
            }

            class Petal {
                constructor() { this.reset(); }
                reset() {
                    this.x = Math.random() * w; this.y = -50;
                    this.s = Math.random() * 8 + 8; this.r = Math.random() * 360;
                    this.rv = (Math.random() - 0.5) * 0.5; this.vx = (Math.random() - 0.5) * 0.3;
                    this.vy = Math.random() * 0.5 + 0.2; this.b = Math.random() * 8 + 8;
                }
                update() {
                    this.x += this.vx; this.y += this.vy; this.r += this.rv;
                    if (this.y > h + 50) this.reset();
                }
                draw() {
                    ctx.save(); ctx.translate(this.x, this.y); ctx.rotate(this.r * Math.PI / 180);
                    ctx.fillStyle = '#4A1A21'; ctx.globalAlpha = 0.12; ctx.filter = `blur(${this.b}px)`;
                    ctx.beginPath(); ctx.ellipse(0, 0, this.s, this.s/1.8, 0, 0, Math.PI * 2); ctx.fill(); ctx.restore();
                }
            }

            for(let i=0; i<40; i++) dusts.push(new Dust());
            for(let i=0; i<10; i++) petals.push(new Petal());

            function loop() {
                ctx.clearRect(0,0,w,h);
                ctx.globalCompositeOperation = 'lighter'; dusts.forEach(d => { d.update(); d.draw(); });
                ctx.globalCompositeOperation = 'source-over'; petals.forEach(p => { p.update(); p.draw(); });
                requestAnimationFrame(loop);
            }
            loop();
        }
    </script>
</body>
</html>
